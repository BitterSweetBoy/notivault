<div class="space-y-6">
  <h2 class="text-2xl font-semibold">Configuración de APIs</h2>
  <div class="p-6 bg-white rounded-xl shadow-sm">
    <p-table
      [value]="tokens"
      dataKey="id"
      [resizableColumns]="false"
      [rows]="10"
      [expandedRowKeys]="expandedRows"
      (onRowExpand)="onRowExpand($event)"
      (onRowCollapse)="onRowCollapse($event)"
      styleClass="p-datatable-sm"
    >
      <!-- Cabecera de columnas -->
      <ng-template #header>
        <div class="mb-6 space-y-1">
          <h2 class="text-lg font-semibold text-gray-800">
            Tokens Configurados
          </h2>
          <p class="text-sm text-gray-500">
            Lista de servicios y tokens configurados en el sistema
          </p>
        </div>
        <tr>
          <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Servicio
          </th>
          <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Estado
          </th>
          <th class="p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Última modificación
          </th>
          <th class="p-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
            Acciones
          </th>
        </tr>
      </ng-template>

      <!-- Cuerpo de filas -->
      <ng-template #body let-token let-expanded="expanded">
        <app-api-token-row
          [token]="token"
          [expanded]="expanded"
          (edit)="onEdit($event)"
          (delete)="onDelete($event)"
          (toggleExpand)="expandedRows[token.id] = !expandedRows[token.id]"
        ></app-api-token-row>
      </ng-template>

      <!-- Template para el contenido expandido -->
      <ng-template #expandedrow let-token>
        <app-api-token-details
          [token]="token"
          [isEditing]="isEditing[token.id]"
          (copy)="copyToClipboard($event)"
          (save)="saveToken(token)"
          (cancel)="cancelEdit(token)"
        ></app-api-token-details>
      </ng-template>
    </p-table>
  </div>
</div>

<p-toast></p-toast>